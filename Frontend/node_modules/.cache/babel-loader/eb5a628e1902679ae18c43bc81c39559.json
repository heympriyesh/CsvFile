{"ast":null,"code":"var _jsxFileName = \"/home/priyeshpandey/Documents/CsvFile/Frontend/src/component/ShowData.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useContext } from 'react';\nimport axios from 'axios';\nimport { ApiContext } from './ApiContext';\nimport CsvDownload from 'react-json-to-csv';\nimport ReactFileReader from 'react-file-reader';\nimport CSVReader from 'react-csv-reader';\nimport FileDataShow from './FileDataShow';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst ShowData = () => {\n  _s();\n\n  const [value, setValue] = useState();\n  const {\n    truevalue,\n    settruevalue,\n    isAuth,\n    setIsAuth\n  } = useContext(ApiContext);\n  const [edit, setEdit] = useState(true);\n  const [data, setData] = useState(\"\");\n  const [editValue, setEditValue] = useState({});\n  const [stop, setStop] = useState(false);\n  const [store, setStore] = useState();\n  const [updatEEffect, setUpdateEffect] = useState(false);\n  const [editEffect, setEditEffect] = useState(false);\n  const [delteEffect, setDeleteEffect] = useState(false);\n  const [file, setFile] = useState();\n  const [uploadFile, setUploadFile] = useState();\n  const [controlModal, setControlModal] = useState(false);\n  const [modalData, setModalData] = useState();\n  const [multer, setMulter] = useState();\n  const [multerFileUpload, setMulteFileUplaod] = useState(false);\n  const [fileToDownload, setFileToDownload] = useState();\n  const [addDataThroughCsv, setAddDataThroughCsv] = useState(true);\n  var emailRegex = new RegExp(/^((\"[\\w-\\s]+\")|([\\w-]+(?:\\.[\\w-]+)*)|(\"[\\w-\\s]+\")([\\w-]+(?:\\.[\\w-]+)*))(@((?:[\\w-]+\\.)*\\w[\\w-]{0,66})\\.([a-z]{2,6}(?:\\.[a-z]{2})?)$)|(@\\[?((25[0-5]\\.|2[0-4][0-9]\\.|1[0-9]{2}\\.|[0-9]{1,2}\\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\\]?$)/i);\n  var letters = /^[a-zA-Z\\s]*$/;\n  const [csvData, setCsvData] = useState();\n\n  const handleChange = (key, value) => {\n    setEditValue(prev => ({ ...prev,\n      [key]: value\n    }));\n  };\n\n  const teamName = [{\n    team: \"RCB\"\n  }, {\n    team: \"MI\"\n  }, {\n    team: \"PK\"\n  }, {\n    team: \"DC\"\n  }, {\n    team: \"RR\"\n  }, {\n    team: \"SRH\"\n  }, {\n    team: \"KKR\"\n  }, {\n    team: \"CSK\"\n  }];\n  const header = ['_id', 'name', 'email', 'age', 'team'];\n  useEffect(() => {\n    axios.get('http://localhost:7000/getDetails').then(result => {\n      setValue(result.data);\n      setStore(result.data);\n      console.log(value);\n      console.log(csvData);\n    });\n  }, [delteEffect, updatEEffect, editEffect, truevalue]);\n  useEffect(() => {\n    axios.get('http://localhost:9000/multerfile').then(result => {\n      console.log(result.data.value);\n      setFileToDownload(result.data);\n    }).catch(err => {\n      console.log({\n        err\n      });\n    });\n  }, [multerFileUpload]);\n\n  const trufalse = text => {\n    setEdit(!edit);\n    setData(text);\n    console.log(data);\n  };\n\n  const cancelFun = () => {\n    setEdit(!edit);\n    setData(\"\");\n    setEditValue({\n      name: \"\",\n      age: \"\",\n      email: \"\"\n    });\n  };\n\n  const updateFun = id => {\n    console.log(\"Edit value\", editValue);\n    console.log(\"upate id\", id);\n\n    if (Object.keys(editValue).length === 0) {\n      return alert(\"Please Fill the fields before submitting..\");\n    }\n\n    if (editValue.name.length === 0) {\n      return alert(\"Please fill the name field..\");\n    }\n\n    if (!letters.test(editValue.name)) {\n      return alert(\"Enter only Text in name field\");\n    }\n\n    if (!emailRegex.test(editValue.email)) {\n      return alert(\"Enter a valid Email..\");\n    }\n\n    if (editValue.age < 18) {\n      return alert(\"Age must be greater then 18.\");\n    }\n\n    if (editValue.team === '') {\n      return alert(\"Please Select a team..\");\n    }\n\n    axios.patch(`http://localhost:7000/updateDetails/${id}`, editValue).then(result => {\n      console.log(result);\n      setData(\"\");\n      setEdit(!edit);\n      setUpdateEffect(!updatEEffect);\n      setEditValue({\n        name: \"\",\n        age: \"\",\n        email: \"\"\n      });\n    }).catch(err => {\n      console.log(\"While updating\", {\n        err\n      });\n    });\n  };\n\n  const deleteData = id => {\n    axios.delete(`http://localhost:7000/delteDetails/${id}`).then(Response => {\n      console.log(Response);\n      setDeleteEffect(!delteEffect);\n    }).catch(err => {\n      console.log(\"Error in Delete..\", {\n        err\n      });\n    });\n  }; // console.log(Papa.parse(csvData,config))\n  // console.log(fileValue)\n\n\n  const handleFileChange = e => {\n    e.preventDefault(); // setFileValue(e.target.value);\n\n    console.log(\"Something is happening..\", file);\n    const formData = new FormData();\n    formData.append('file', file);\n    const config = {\n      headers: {\n        'content-type': 'multipart/form-data'\n      }\n    };\n    axios.post('http://localhost:7000/upload', formData, config).then(response => {\n      console.log(response); // setIsAuth(!isAuth);\n    }).catch(err => {\n      console.log(err);\n      alert(\"Choose the file first...\");\n    });\n  };\n\n  const uploadHandle = e => {\n    e.preventDefault();\n    const formData = new FormData();\n    formData.append('profile', multer);\n    const config = {\n      headers: {\n        'content-type': 'multipart/form-data'\n      }\n    };\n    axios.post('http://localhost:9000/single', formData, config).then(response => {\n      console.log(response); // setIsAuth(!isAuth);\n\n      setMulteFileUplaod(!multerFileUpload);\n    }).catch(err => {\n      console.log(err); // alert(\"Choose the file first...\")\n    });\n  };\n\n  const validateData = () => {\n    axios.get('http://localhost:7000/validateData').then(response => {\n      console.log(\"This from validate data\", response.data);\n      setControlModal(!controlModal);\n      setModalData(response.data);\n    }).catch(err => {\n      console.log(\"The erro value from validate\", err);\n      alert(\"Please Choose the file first...!!\");\n      setControlModal(!controlModal);\n    });\n  };\n\n  const download = id => {\n    axios.get(`http://localhost:9000/download/${id}`).then(response => {\n      console.log(\"download response\", response.data);\n      window.location.href = response.data.url;\n    }).catch(err => {\n      console.log({\n        err\n      });\n    });\n  };\n\n  const csvFileData = () => {\n    settruevalue(false);\n    axios.post('http://localhost:7000/create').then(result => {\n      console.log(\"Create csv\", result);\n      setValue(result.data);\n      setStore(result.data); //    setAddDataThroughCsv(false)\n    }).catch(err => {\n      console.log(\"err\"); //    alert(\"Something went wrong..\")\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(CsvDownload, {\n      data: store,\n      className: \"btn btn-danger d-block d-flex m-auto mt-2 mb-2 p-3\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 13\n    }, this), controlModal ? /*#__PURE__*/_jsxDEV(FileDataShow, {\n      data: modalData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 27\n    }, this) : '', /*#__PURE__*/_jsxDEV(\"form\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          onChange: e => setFile(e.target.files[0]),\n          name: \"file\",\n          accept: \"file_extension|.csv\",\n          class: \"form-control-file\",\n          id: \"exampleFormControlFile1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 22\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: e => handleFileChange(e),\n          children: \"Upload doc\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn btn-primary\",\n      onClick: () => validateData(),\n      children: \"Validate Data\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-danger bg-dark m-2\",\n      children: \"Upload File to DataBase\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: e => uploadHandle(e),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"custom-file mb-3\",\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            name: \"profile\",\n            onChange: e => setMulter(e.target.files[0])\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 25\n          }, this), \"Choose file to upload\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"submit\",\n        value: \"Submit\",\n        class: \"btn btn-primary btn-block mb-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"border border-dark m-auto w-50 mb-3\",\n      children: fileToDownload && fileToDownload.map((val, index) => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \" m-2 \",\n          children: [/*#__PURE__*/_jsxDEV(\"a\", {\n            onClick: () => download(val._id),\n            className: \"btn btn-success mt-1 mb-1 p-1\",\n            children: val.originalname\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 35\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 31\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 31\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 19\n    }, this), value && value.map((val, index) => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [data._id === val._id ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"m-auto form-group w-50 border border-success p-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            class: \"form-control\",\n            value: editValue.name,\n            onChange: e => handleChange(\"name\", e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            class: \"form-control\",\n            value: editValue.email,\n            onChange: e => handleChange(\"email\", e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Age\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            class: \"form-control\",\n            type: \"number\",\n            value: editValue.age,\n            onChange: e => handleChange(\"age\", e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"dropdown mt-2 container-fluid p-2 bg-primary\",\n            onChange: e => {\n              handleChange(\"team\", e.target.value);\n            },\n            name: \"category\",\n            children: teamName && teamName.map((val, index) => {\n              return /*#__PURE__*/_jsxDEV(\"option\", {\n                value: val.team,\n                className: \"bg-white\",\n                children: val.team\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 295,\n                columnNumber: 41\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 49\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"card mb-3 container h-25 w-50\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: val.image,\n              className: \"card-img-top container p-5 height\",\n              alt: \"...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 301,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-body\",\n              children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                className: \"card-title\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Name : \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 303,\n                  columnNumber: 72\n                }, this), val.name]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 303,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"card-text\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Email : \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 304,\n                  columnNumber: 66\n                }, this), val.email]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 304,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"card-text\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Favourite Team : \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 305,\n                  columnNumber: 66\n                }, this), val.team]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 305,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"card-text\",\n                children: /*#__PURE__*/_jsxDEV(\"small\", {\n                  className: \"text-muted\",\n                  children: [\"Age: \", val.age]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 307,\n                  columnNumber: 70\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 307,\n                columnNumber: 45\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 302,\n              columnNumber: 41\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => deleteData(val._id),\n            className: \"btn btn-danger\",\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true), edit ? /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => trufalse(val),\n          className: \"btn btn-primary m-2\",\n          children: \"Edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 33\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: data._id === val._id ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => updateFun(val._id),\n              className: \"btn btn-primary\",\n              children: \"Update\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 314,\n              columnNumber: 57\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => cancelFun(),\n              className: \"btn btn-warning m-2\",\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 314,\n              columnNumber: 143\n            }, this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => trufalse(val),\n            className: \"btn btn-primary m-2\",\n            children: \"Edit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 33\n          }, this)\n        }, void 0, false)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 21\n      }, this);\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 225,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ShowData, \"GlvO7t+NUnu+hJ7BMjtF1bb+q3g=\");\n\n_c = ShowData;\nexport default ShowData;\n\nvar _c;\n\n$RefreshReg$(_c, \"ShowData\");","map":{"version":3,"sources":["/home/priyeshpandey/Documents/CsvFile/Frontend/src/component/ShowData.js"],"names":["React","useEffect","useState","useContext","axios","ApiContext","CsvDownload","ReactFileReader","CSVReader","FileDataShow","ShowData","value","setValue","truevalue","settruevalue","isAuth","setIsAuth","edit","setEdit","data","setData","editValue","setEditValue","stop","setStop","store","setStore","updatEEffect","setUpdateEffect","editEffect","setEditEffect","delteEffect","setDeleteEffect","file","setFile","uploadFile","setUploadFile","controlModal","setControlModal","modalData","setModalData","multer","setMulter","multerFileUpload","setMulteFileUplaod","fileToDownload","setFileToDownload","addDataThroughCsv","setAddDataThroughCsv","emailRegex","RegExp","letters","csvData","setCsvData","handleChange","key","prev","teamName","team","header","get","then","result","console","log","catch","err","trufalse","text","cancelFun","name","age","email","updateFun","id","Object","keys","length","alert","test","patch","deleteData","delete","Response","handleFileChange","e","preventDefault","formData","FormData","append","config","headers","post","response","uploadHandle","validateData","download","window","location","href","url","csvFileData","target","files","map","val","index","_id","originalname","image"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext } from 'react'\nimport axios from 'axios';\nimport { ApiContext } from './ApiContext';\nimport CsvDownload from 'react-json-to-csv'\nimport ReactFileReader from 'react-file-reader';\nimport CSVReader from 'react-csv-reader'\nimport FileDataShow from './FileDataShow'\nconst ShowData = () => {\n\n    const [value, setValue] = useState()\n    const { truevalue, settruevalue, isAuth, setIsAuth} = useContext(ApiContext)\n    const [edit, setEdit] = useState(true);\n    const [data, setData] = useState(\"\");\n    const [editValue, setEditValue] = useState({})\n    const [stop, setStop] = useState(false);\n    const [store, setStore] = useState();\n    const [updatEEffect, setUpdateEffect] = useState(false);\n    const [editEffect, setEditEffect] = useState(false);\n    const [delteEffect, setDeleteEffect] = useState(false)\n    const [file,setFile]=useState();\n    const [uploadFile,setUploadFile]=useState();\n    const [controlModal,setControlModal]=useState(false);\n    const [modalData,setModalData]=useState()\n    const [multer, setMulter] = useState();\n    const [multerFileUpload,setMulteFileUplaod]=useState(false);\n    const [fileToDownload,setFileToDownload]=useState();\n    const [addDataThroughCsv,setAddDataThroughCsv]=useState(true)\n\n    var emailRegex = new RegExp(/^((\"[\\w-\\s]+\")|([\\w-]+(?:\\.[\\w-]+)*)|(\"[\\w-\\s]+\")([\\w-]+(?:\\.[\\w-]+)*))(@((?:[\\w-]+\\.)*\\w[\\w-]{0,66})\\.([a-z]{2,6}(?:\\.[a-z]{2})?)$)|(@\\[?((25[0-5]\\.|2[0-4][0-9]\\.|1[0-9]{2}\\.|[0-9]{1,2}\\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\\]?$)/i);\n    var letters = /^[a-zA-Z\\s]*$/;\n\n    const [csvData,setCsvData]=useState()\n    const handleChange = (key, value) => {\n        setEditValue((prev) => ({ ...prev, [key]: value }))\n    }\n    const teamName = [\n        {\n            team: \"RCB\"\n        },\n        {\n            team: \"MI\"\n        },\n        {\n            team: \"PK\"\n        },\n        {\n            team: \"DC\"\n        },\n        {\n            team: \"RR\"\n        },\n        {\n            team: \"SRH\"\n        },\n        {\n            team: \"KKR\"\n        },\n        {\n            team: \"CSK\"\n        }\n    ]\n    const header=['_id','name','email','age','team'];\n    useEffect(() => {\n        axios.get('http://localhost:7000/getDetails')\n            .then(result => {\n                setValue(result.data)\n                setStore(result.data)\n\n                console.log(value)\n                console.log(csvData)\n            })\n    }, [delteEffect, updatEEffect, editEffect, truevalue])\n\n    useEffect(() => {\n        axios.get('http://localhost:9000/multerfile')\n            .then(result => {\n               console.log(result.data.value)\n               setFileToDownload(result.data)\n            }).catch((err)=>{\n                console.log({err})\n            })\n           \n    }, [multerFileUpload])\n\n\n    const trufalse = (text) => {\n        setEdit(!edit);\n        setData(text);\n        console.log(data)\n    }\n    const cancelFun = () => {\n        setEdit(!edit);\n        setData(\"\")\n        setEditValue({ name: \"\", age: \"\", email: \"\", })\n\n    }\n    const updateFun = (id) => {\n        console.log(\"Edit value\", editValue)\n        console.log(\"upate id\", id)\n        if (Object.keys(editValue).length === 0) {\n            return alert(\"Please Fill the fields before submitting..\")\n        }\n        if (editValue.name.length === 0) {\n            return alert(\"Please fill the name field..\")\n        }\n        if (!letters.test(editValue.name)) {\n            return alert(\"Enter only Text in name field\")\n        }\n        if (!emailRegex.test(editValue.email)) {\n            return alert(\"Enter a valid Email..\")\n        }\n        if (editValue.age < 18) {\n            return alert(\"Age must be greater then 18.\")\n        }\n        \n        if (editValue.team === '') {\n            return alert(\"Please Select a team..\")\n        }\n        axios.patch(`http://localhost:7000/updateDetails/${id}`, editValue)\n            .then((result) => {\n                console.log(result)\n                setData(\"\")\n                setEdit(!edit)\n                setUpdateEffect(!updatEEffect)\n                setEditValue({ name: \"\", age: \"\", email: \"\", })\n            }).catch(err => {\n                console.log(\"While updating\", { err })\n            })\n    }\n\n    const deleteData = (id) => {\n        axios.delete(`http://localhost:7000/delteDetails/${id}`)\n            .then(Response => {\n                console.log(Response)\n                setDeleteEffect(!delteEffect)\n            })\n            .catch(err => {\n                console.log(\"Error in Delete..\", { err })\n            })\n    }\n    // console.log(Papa.parse(csvData,config))\n    // console.log(fileValue)\n    const handleFileChange=(e)=>{\n        e.preventDefault();\n        // setFileValue(e.target.value);\n        console.log(\"Something is happening..\",file)\n        const formData=new FormData();\n        formData.append('file',file)\n        const config={\n            headers:{\n                'content-type':'multipart/form-data'\n            }\n        }\n        axios.post('http://localhost:7000/upload',formData,config)\n        .then((response)=>{\n            console.log(response)\n            // setIsAuth(!isAuth);\n        })\n        .catch((err)=>{\n            console.log(err)\n            alert(\"Choose the file first...\")\n        })\n    }\n\n    const uploadHandle=(e)=>{\n        e.preventDefault();\n        const formData = new FormData();\n        formData.append('profile', multer)\n        const config = {\n            headers: {\n                'content-type': 'multipart/form-data'\n            }\n        }\n        axios.post('http://localhost:9000/single', formData, config)\n            .then((response) => {\n                console.log(response)\n                // setIsAuth(!isAuth);\n                setMulteFileUplaod(!multerFileUpload);\n            })\n            .catch((err) => {\n                console.log(err)\n                // alert(\"Choose the file first...\")\n            })\n    }\n\n    const validateData=()=>{\n        axios.get('http://localhost:7000/validateData')\n        .then(response=>{\n            console.log(\"This from validate data\",response.data)\n            setControlModal(!controlModal)\n            setModalData(response.data)\n        })\n        .catch((err)=>{\n            console.log(\"The erro value from validate\",err)\n            alert(\"Please Choose the file first...!!\")\n            setControlModal(!controlModal);\n        })\n    }\n   const download=(id)=>{\n       axios.get(`http://localhost:9000/download/${id}`)\n       .then(response=>{\n           console.log(\"download response\",response.data)\n           window.location.href=response.data.url;\n       })\n       .catch(err=>{\n           console.log({err})\n       })\n   }\n   const csvFileData=()=>{\n       settruevalue(false)\n\n       axios.post('http://localhost:7000/create')\n       .then((result)=>{\n           console.log(\"Create csv\",result)\n           setValue(result.data)\n           setStore(result.data)\n        //    setAddDataThroughCsv(false)\n       })\n       .catch((err)=>{\n           console.log(\"err\")\n        //    alert(\"Something went wrong..\")\n       })\n   }\n    return (\n        <div>\n            {/* {addDataThroughCsv?<button className=\"btn btn-warning d-block d-flex m-auto mt-4 mb-4 p-3\" onClick={()=>csvFileData()}>Add Data through Csv</button>:''} */}\n            <CsvDownload data={store} className=\"btn btn-danger d-block d-flex m-auto mt-2 mb-2 p-3\"/>\n            {controlModal?<FileDataShow data={modalData}/>:''}\n            {/* <FileDataShow/> */}\n            <form >\n                <div class=\"form-group\">\n                    {/* <label for=\"exampleFormControlFile1\">Example file input</label> */}\n                     <input type=\"file\"\n                        onChange={(e)=>setFile(e.target.files[0])}\n                        name=\"file\"\n                        accept=\"file_extension|.csv\"\n                    class=\"form-control-file\" id=\"exampleFormControlFile1\"/>\n                    <button onClick={(e)=>handleFileChange(e)}>Upload doc</button>\n                    \n                </div>\n            </form>\n            <button className=\"btn btn-primary\" onClick={() => validateData()}>Validate Data</button>\n            <h1 className=\"text-danger bg-dark m-2\">Upload File to DataBase</h1>\n            <form  onSubmit={(e)=>uploadHandle(e)}>\n                <div class=\"custom-file mb-3\">\n                    <label>\n                        <input type=\"file\" name=\"profile\" onChange={(e) => setMulter(e.target.files[0])} />\n                Choose file to upload\n            </label>\n                </div>\n                    <input type=\"submit\" value=\"Submit\" class=\"btn btn-primary btn-block mb-2\"/>\n             </form>\n                  <div className=\"border border-dark m-auto w-50 mb-3\">\n                      {fileToDownload&&fileToDownload.map((val,index)=>{\n                          return(\n                              <div className=\" m-2 \">\n                                  <a onClick={()=>download(val._id)} className=\"btn btn-success mt-1 mb-1 p-1\">{val.originalname}</a>\n                              <br/>\n                              </div>\n                          )\n                      })}\n                  </div>  \n            \n            {value && value.map((val, index) => {\n                return (\n                    <div>\n                        {data._id === val._id ? <div className=\"m-auto form-group w-50 border border-success p-2\">\n                            {/* <hr/> */}\n                            <label>Name</label>\n                            <input\n                                class=\"form-control\"\n                                value={editValue.name}\n                                onChange={(e) => handleChange(\"name\", e.target.value)}\n                            />\n                            <label>Email</label>\n                            <input\n                                class=\"form-control\"\n                                value={editValue.email}\n                                onChange={(e) => handleChange(\"email\", e.target.value)}\n                            />\n                            <label>Age</label>\n                            <input\n                                class=\"form-control\"\n                            type=\"number\"\n                                value={editValue.age}\n                                onChange={(e) => handleChange(\"age\", e.target.value)}\n                            />\n                            <select\n                                className=\"dropdown mt-2 container-fluid p-2 bg-primary\"\n                                onChange={(e) => {\n                                    handleChange(\"team\", e.target.value)\n                                }} name=\"category\">\n                                {teamName && teamName.map((val, index) => {\n                                    return (\n                                        <option value={val.team} className=\"bg-white\">{val.team}</option>)\n                                })}\n                            </select>\n                            {/* <hr/> */}\n                        </div> : <>\n                                <div class=\"card mb-3 container h-25 w-50\">\n                                    <img src={val.image} className=\"card-img-top container p-5 height\" alt=\"...\"/>\n                                        <div className=\"card-body\">\n                                            <h5 className=\"card-title\"><span>Name : </span>{val.name}</h5>\n                                        <p className=\"card-text\"><span>Email : </span>{val.email}</p>\n                                        <p className=\"card-text\"><span>Favourite Team : </span>{val.team}</p>\n\n                                            <p className=\"card-text\"><small className=\"text-muted\">Age: {val.age}</small></p>\n                                        </div>\n                                        </div>\n                            <button onClick={() => deleteData(val._id)} className=\"btn btn-danger\" >Delete</button>\n                           \n                        </>}\n                        {edit ? <button onClick={() => trufalse(val)} className=\"btn btn-primary m-2\">Edit</button> :\n                            <>{data._id === val._id ? <><button onClick={() => updateFun(val._id)} className=\"btn btn-primary\">Update</button><button onClick={() => cancelFun()} className=\"btn btn-warning m-2\">Cancel</button></> :\n                                <button onClick={() => trufalse(val)} className=\"btn btn-primary m-2\">Edit</button>}</>}\n                    </div>\n                )\n            })}\n        </div>\n    )\n}\n\nexport default ShowData\n"]},"metadata":{},"sourceType":"module"}